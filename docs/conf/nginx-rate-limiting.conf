# Rate limiting zones for DDoS protection
# Add this to the http {} block in /etc/nginx/nginx.conf
# Right after "reset_timedout_connection on;" and before "# Gzip compression"

    # Rate limiting zones for DDoS protection
    # Zone for general requests (HTML pages, API calls)
    limit_req_zone $binary_remote_addr zone=general:10m rate=10r/s;

    # Zone for static assets (images, CSS, JS, fonts)
    limit_req_zone $binary_remote_addr zone=static:10m rate=50r/s;

    # Zone for API/dynamic content (stricter)
    limit_req_zone $binary_remote_addr zone=api:10m rate=5r/s;

    # Connection limit per IP (max 20 simultaneous connections)
    limit_conn_zone $binary_remote_addr zone=addr:10m;

    # Custom error pages for rate limiting
    limit_req_status 429;
    limit_conn_status 429;
